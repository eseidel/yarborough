responses:
  - pattern: "1N P"
    rules:
      - call: "2C"
        variants:
          - name: "Stayman (5-4 Majors)"
            priority: 30
            description: "8+ HCP, 5 Spades, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 4
              - type: MaxLength
                suit: Hearts
                count: 4

          - name: "Stayman (4-5 Majors)"
            priority: 30
            description: "8+ HCP, 4 Spades, 5 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 4
              - type: MaxLength
                suit: Spades
                count: 4
              - type: MinLength
                suit: Hearts
                count: 5

          - name: "Stayman (Club Slam Try)"
            priority: 15
            description: "10+ HCP, 6+ Clubs"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Clubs
                count: 6

          - name: "Stayman (Diamond Slam Try)"
            priority: 15
            description: "10+ HCP, 6+ Diamonds"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Diamonds
                count: 6

          - name: "Stayman (4H)"
            priority: 10
            description: "8+ HCP, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Hearts
                count: 4

          - name: "Stayman (4S)"
            priority: 10
            description: "8+ HCP, 4 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 4

          - name: "Stayman (5S 5D Game Force)"
            priority: 25
            description: "Checkback with 5S 5D, GF"
            constraints:
              - type: MinHCP
                min: 13
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Diamonds
                count: 5

      - call: "2D"
        variants:
          - name: "Jacoby Transfer to Hearts"
            priority: 20
            description: "5+ Hearts"
            constraints:
              - type: MinLength
                suit: Hearts
                count: 5

      - call: "2H"
        variants:
          - name: "Jacoby Transfer to Spades"
            priority: 20
            description: "5+ Spades"
            constraints:
              - type: MinLength
                suit: Spades
                count: 5
          - name: "Jacoby Transfer to Spades (5-5 Majors)"
            priority: 25
            description: "5 Spades, 5 Hearts, Inv+"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MaxLength
                suit: Hearts
                count: 5

      - call: "2N"
        variants:
          - name: "Invitation (Strong)"
            priority: 10
            description: "9 HCP Balanced"
            constraints:
              - type: MinHCP
                min: 9
              - type: MaxHCP
                max: 9
              - type: IsBalanced
                balanced: true
          - name: "Invitation (Clubs)"
            priority: 10
            description: "8-9 HCP, 5 Clubs"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Clubs
                count: 5
          - name: "Invitation (Diamonds)"
            priority: 10
            description: "8-9 HCP, 5 Diamonds"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Diamonds
                count: 5

      - call: "3C"
        variants:
          - name: "Slam Try Clubs"
            priority: 10
            description: "10+ HCP, 6+ Clubs"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Clubs
                count: 6

      - call: "3D"
        variants:
          - name: "Slam Try Diamonds"
            priority: 10
            description: "10+ HCP, 6+ Diamonds"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Diamonds
                count: 6

      - call: "3H"
        variants:
          - name: "Slam Try Hearts"
            priority: 30
            description: "10+ HCP, 6+ Hearts"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 6

      - call: "3S"
        variants:
          - name: "Slam Try Spades"
            priority: 30
            description: "10+ HCP, 6+ Spades"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 6

      - call: "3N"
        variants:
          - name: "Sign-off Game"
            priority: 10
            description: "10-15 HCP Balanced"
            constraints:
              - type: MinHCP
                min: 10
              - type: IsBalanced
                balanced: true

      - call: "4N"
        variants:
          - name: "Quantitative Invite"
            priority: 20
            description: "16-17 HCP Balanced"
            constraints:
              - type: MinHCP
                min: 16
              - type: IsBalanced
                balanced: true

      - call: "4S"
        variants:
          - name: "Weak Game Jump"
            priority: 20
            description: "Long Spades, weakish"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 6

      - call: "4H"
        variants:
          - name: "Weak Game Jump"
            priority: 20
            description: "Long Hearts, weakish"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Hearts
                count: 6

  # Opener's rebid after Stayman
  - pattern: "1N P 2C P"
    rules:
      - call: "2D"
        variants:
          - name: "No 4-card Major"
            priority: 10
            description: "Denied 4-card major after Stayman"
            constraints:
              - type: MaxLength
                suit: Hearts
                count: 3
              - type: MaxLength
                suit: Spades
                count: 3
      - call: "2H"
        variants:
          - name: "4-card Heart Suit"
            priority: 21
            description: "Shows 4 hearts after Stayman"
            constraints:
              - type: MinLength
                suit: Hearts
                count: 4
      - call: "2S"
        variants:
          - name: "4-card Spade Suit"
            priority: 20
            description: "Shows 4 spades after Stayman"
            constraints:
              - type: MinLength
                suit: Spades
                count: 4

  # Opener's rebid after Jacoby Transfer to Hearts
  - pattern: "1N P 2D P"
    rules:
      - call: "2H"
        variants:
          - name: "Accept Jacoby to Hearts"
            priority: 10
            description: "Normal completion of Jacoby transfer"
            constraints: []
      - call: "3H"
        variants:
          - name: "Super-accept Jacoby to Hearts"
            priority: 20
            description: "17 HCP and 4-card support"
            constraints:
              - type: MinHCP
                min: 17
              - type: MinLength
                suit: Hearts
                count: 4

  # Opener's rebid after Jacoby Transfer to Spades
  - pattern: "1N P 2H P"
    rules:
      - call: "2S"
        variants:
          - name: "Accept Jacoby to Spades"
            priority: 10
            description: "Normal completion of Jacoby transfer"
            constraints: []
      - call: "3S"
        variants:
          - name: "Super-accept Jacoby to Spades"
            priority: 20
            description: "17 HCP and 4-card support"
            constraints:
              - type: MinHCP
                min: 17
              - type: MinLength
                suit: Spades
                count: 4

  # Responder rebid after Stayman (Partner denied major)
  - pattern: "1N P 2C P 2D P"
    rules:
      - call: "3S"
        variants:
          - name: "Smolen / 5S-4H Game Force"
            priority: 20
            description: "10-15 HCP, 5 Spades, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 4

      - call: "3H"
        variants:
          - name: "Smolen / 5H-4S Game Force"
            priority: 20
            description: "10-15 HCP, 5 Hearts, 4 Spades"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Spades
                count: 4

      - call: "3C"
        variants:
          - name: "Slam Try Clubs"
            priority: 20
            description: "10+ HCP, 6+ Clubs"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Clubs
                count: 6

      - call: "3D"
        variants:
          - name: "Slam Try Diamonds"
            priority: 20
            description: "10+ HCP, 6+ Diamonds"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Diamonds
                count: 6

      - call: "3N"
        variants:
          - name: "Sign-off Game"
            priority: 10
            description: "10-15 HCP"
            constraints:
              - type: MinHCP
                min: 10

      - call: "2S"
        variants:
          - name: "Invitation with 5 Spades"
            priority: 20
            description: "8-9 HCP, 5 Spades, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 4

      - call: "2H"
        variants:
          - name: "Invitation with 5 Hearts"
            priority: 20
            description: "8-9 HCP, 5 Hearts, 4 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Spades
                count: 4

      - call: "2N"
        variants:
          - name: "Invitation"
            priority: 10
            description: "8-9 HCP"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
      # Pass is default fallback

  # Responder rebid after Stayman (Partner bid Hearts)
  - pattern: "1N P 2C P 2H P"
    rules:
      - call: "4H"
        variants:
          - name: "Sign-off Game in Major"
            priority: 10
            description: "10-15 HCP, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 4
      - call: "3C"
        variants:
          - name: "Slam Try Clubs"
            priority: 20
            description: "10+ HCP, 6+ Clubs"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Clubs
                count: 6
      - call: "3D"
        variants:
          - name: "Slam Try Diamonds"
            priority: 20
            description: "10+ HCP, 6+ Diamonds"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Diamonds
                count: 6
      - call: "3N"
        variants:
          - name: "Sign-off Game in NT"
            priority: 10
            description: "10-15 HCP, <4 Hearts"
            constraints:
              - type: MinHCP
                min: 10
      - call: "3H"
        variants:
          - name: "Invite in Major"
            priority: 10
            description: "8-9 HCP, 4 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Hearts
                count: 4
      - call: "2N"
        variants:
          - name: "Invite in NT"
            priority: 10
            description: "8-9 HCP, <4 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
      # Pass is default fallback

  # Responder rebid after Stayman (Partner bid Spades)
  - pattern: "1N P 2C P 2S P"
    rules:
      - call: "4S"
        variants:
          - name: "Sign-off Game in Major"
            priority: 10
            description: "10-15 HCP, 4 Spades"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 4
      - call: "3C"
        variants:
          - name: "Slam Try Clubs"
            priority: 20
            description: "10+ HCP, 6+ Clubs"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Clubs
                count: 6
      - call: "3D"
        variants:
          - name: "Slam Try Diamonds"
            priority: 20
            description: "10+ HCP, 6+ Diamonds"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Diamonds
                count: 6
      - call: "3N"
        variants:
          - name: "Sign-off Game in NT"
            priority: 10
            description: "10-15 HCP, <4 Spades"
            constraints:
              - type: MinHCP
                min: 10
      - call: "3S"
        variants:
          - name: "Invite in Major"
            priority: 10
            description: "8-9 HCP, 4 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Spades
                count: 4
      - call: "2N"
        variants:
          - name: "Invite in NT"
            priority: 10
            description: "8-9 HCP, <4 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
      # Pass is default fallback

  # Responder rebid after Transfer to Hearts (Accepted by partner)
  - pattern: "1N P 2D P 2H P"
    rules:
      - call: "4H"
        variants:
          - name: "Sign-off Game"
            priority: 25
            description: "10-15 HCP, 6 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Hearts
                count: 6
      - call: "3S"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Hearts, 5 Spades GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Spades
                count: 5
      - call: "3C"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Hearts, 5 Clubs GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Clubs
                count: 5
      - call: "3D"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Hearts, 5 Diamonds GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Diamonds
                count: 5
      - call: "3N"
        variants:
          - name: "Game Force Choice"
            priority: 10
            description: "10-15 HCP, 5 Hearts"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Hearts
                count: 5
      - call: "3H"
        variants:
          - name: "Invite"
            priority: 10
            description: "8-9 HCP, 6 Hearts"
            constraints:
              - type: MinHCP
                min: 6
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Hearts
                count: 6
      - call: "2N"
        variants:
          - name: "Invite Choice"
            priority: 10
            description: "8-9 HCP, 5 Hearts"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Hearts
                count: 5
      - call: "2S"
        variants:
          - name: "5-5 Majors (Weak/Inv)"
            priority: 20
            description: "5+ Hearts, 5+ Spades"
            constraints:
              - type: MinHCP
                min: 5
              - type: MinLength
                suit: Hearts
                count: 5
              - type: MinLength
                suit: Spades
                count: 5

  # Responder rebid after Transfer to Spades (Accepted by partner)
  - pattern: "1N P 2H P 2S P"
    rules:
      - call: "4S"
        variants:
          - name: "Sign-off Game"
            priority: 25
            description: "10-15 HCP, 6 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MinLength
                suit: Spades
                count: 6
      - call: "4H"
        variants:
          - name: "Game Force 5-5 Majors (Limit)"
            priority: 25
            description: "5+ Spades, 5+ Hearts, GF Limit"
            constraints:
              - type: MinHCP
                min: 10
              - type: MaxHCP
                max: 12
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 5
      - call: "3H"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Spades, 5 Hearts GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Hearts
                count: 5
      - call: "3C"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Spades, 5 Clubs GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Clubs
                count: 5
      - call: "3D"
        variants:
          - name: "Game Force New Suit"
            priority: 20
            description: "5 Spades, 5 Diamonds GF"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 5
              - type: MinLength
                suit: Diamonds
                count: 5
      - call: "3N"
        variants:
          - name: "Game Force Choice"
            priority: 10
            description: "10-15 HCP, 5 Spades"
            constraints:
              - type: MinHCP
                min: 10
              - type: MinLength
                suit: Spades
                count: 5
      - call: "3S"
        variants:
          - name: "Invite"
            priority: 10
            description: "8-9 HCP, 6 Spades"
            constraints:
              - type: MinHCP
                min: 6
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Spades
                count: 6
      - call: "2N"
        variants:
          - name: "Invite Choice"
            priority: 10
            description: "8-9 HCP, 5 Spades"
            constraints:
              - type: MinHCP
                min: 8
              - type: MaxHCP
                max: 9
              - type: MinLength
                suit: Spades
                count: 5

  # Responder's response to 2NT opening
  - pattern: "2N P"
    rules:
      - call: "3C"
        variants:
          - name: "Stayman (Hearts)"
            priority: 25
            description: "Interest in Hearts over 2NT"
            constraints:
              - type: MinLength
                suit: Hearts
                count: 4
          - name: "Stayman (Spades)"
            priority: 25
            description: "Interest in Spades over 2NT"
            constraints:
              - type: MinLength
                suit: Spades
                count: 4
      - call: "3D"
        variants:
          - name: "Jacoby Transfer to Hearts"
            priority: 40
            description: "5+ Hearts over 2NT"
            constraints:
              - type: MinLength
                suit: Hearts
                count: 5
      - call: "3H"
        variants:
          - name: "Jacoby Transfer to Spades"
            priority: 40
            description: "5+ Spades over 2NT"
            constraints:
              - type: MinLength
                suit: Spades
                count: 5
      - call: "3N"
        variants:
          - name: "Sign-off"
            priority: 10
            description: "Sign-off in game over 2NT"
            constraints: []
      - call: "4C"
        variants:
          - name: "Gerber"
            priority: 15
            description: "Ace-asking Gerber over 2NT"
            constraints: []
      - call: "4N"
        variants:
          - name: "Quantitative Invite"
            priority: 15
            description: "Inviting slam over 2NT"
            constraints:
              - type: MinHCP
                min: 10
              - type: MaxHCP
                max: 12

  # Opener's rebid after Stayman over 2NT
  - pattern: "2N P 3C P"
    rules:
      - call: "3D"
        variants:
          - name: "No 4-card Major"
            priority: 10
            description: "Denied 4-card major after Stayman over 2NT"
            constraints:
              - type: MaxLength
                suit: Hearts
                count: 3
              - type: MaxLength
                suit: Spades
                count: 3
      - call: "3H"
        variants:
          - name: "4-card Heart Suit"
            priority: 21
            description: "Shows 4 hearts after Stayman over 2NT"
            constraints:
              - type: MinLength
                suit: Hearts
                count: 4
      - call: "3S"
        variants:
          - name: "4-card Spade Suit"
            priority: 20
            description: "Shows 4 spades after Stayman over 2NT"
            constraints:
              - type: MinLength
                suit: Spades
                count: 4

  # Opener's rebid after Jacoby Transfer over 2NT
  - pattern: "2N P 3D P"
    rules:
      - call: "3H"
        variants:
          - name: "Accept Jacoby to Hearts"
            priority: 10
            description: "Normal completion of Jacoby transfer over 2NT"
            constraints: []

  - pattern: "2N P 3H P"
    rules:
      - call: "3S"
        variants:
          - name: "Accept Jacoby to Spades"
            priority: 10
            description: "Normal completion of Jacoby transfer over 2NT"
            constraints: []
